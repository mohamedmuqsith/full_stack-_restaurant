<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ceylon Kitchen - Login & Signup</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      width: 100%;
      max-width: 450px;
    }

    .tabs {
      display: flex;
      background: #f5f5f5;
    }

    .tab {
      flex: 1;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      font-weight: 600;
      font-size: 16px;
      color: #666;
      transition: all 0.3s ease;
      border-bottom: 3px solid transparent;
    }

    .tab.active {
      color: #667eea;
      background: white;
      border-bottom-color: #667eea;
    }

    .form-container {
      padding: 40px;
    }

    .form-content {
      display: none;
    }

    .form-content.active {
      display: block;
      animation: fadeIn 0.4s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .welcome-text {
      text-align: center;
      margin-bottom: 30px;
    }

    .welcome-text h2 {
      font-size: 28px;
      color: #333;
      margin-bottom: 8px;
    }

    .welcome-text p {
      color: #666;
      font-size: 14px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 500;
      font-size: 14px;
    }

    .form-group input {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 15px;
      transition: all 0.3s ease;
      font-family: 'Poppins', sans-serif;
    }

    .form-group input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .error-message {
      color: #e74c3c;
      font-size: 12px;
      margin-top: 5px;
      display: none;
    }

    .error-message.show {
      display: block;
    }

    .form-group input.error {
      border-color: #e74c3c;
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 25px;
    }

    .checkbox-wrapper {
      display: flex;
      align-items: center;
    }

    .checkbox-wrapper input[type="checkbox"] {
      width: 18px;
      height: 18px;
      margin-right: 8px;
      cursor: pointer;
    }

    .checkbox-wrapper label {
      font-size: 14px;
      color: #666;
      cursor: pointer;
      margin: 0;
    }

    .forgot-password {
      color: #667eea;
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
    }

    .forgot-password:hover {
      text-decoration: underline;
    }

    .submit-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Poppins', sans-serif;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
    }

    .submit-btn:active {
      transform: translateY(0);
    }

    .switch-text {
      text-align: center;
      margin-top: 20px;
      color: #666;
      font-size: 14px;
    }

    .switch-text a {
      color: #667eea;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
    }

    .switch-text a:hover {
      text-decoration: underline;
    }

    .toast {
      position: fixed;
      bottom: -100px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 16px 30px;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: bottom 0.4s ease;
      z-index: 1000;
      font-size: 14px;
    }

    .toast.show {
      bottom: 30px;
    }

    .toast.success {
      background: #27ae60;
    }

    .toast.error {
      background: #e74c3c;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="tabs">
      <div class="tab active" data-tab="login">Login</div>
      <div class="tab" data-tab="signup">Sign Up</div>
    </div>

    <div class="form-container">
      <!-- Login Form -->
      <div class="form-content active" id="login-form">
        <div class="welcome-text">
          <h2>Welcome Back! üëã</h2>
          <p>Please enter your details to sign in</p>
        </div>

        <form id="loginForm">
          <div class="form-group">
            <label for="loginEmail">Email Address</label>
            <input type="email" id="loginEmail" placeholder="your.email@example.com" />
            <div class="error-message" id="loginEmailError"></div>
          </div>

          <div class="form-group">
            <label for="loginPassword">Password</label>
            <input type="password" id="loginPassword" placeholder="Enter your password" />
            <div class="error-message" id="loginPasswordError"></div>
          </div>

          <div class="checkbox-group">
            <div class="checkbox-wrapper">
              <input type="checkbox" id="rememberMe" />
              <label for="rememberMe">Remember me</label>
            </div>
            <a href="#" class="forgot-password">Forgot Password?</a>
          </div>

          <button type="submit" class="submit-btn">Login</button>
        </form>

        <div class="switch-text">
          Don't have an account? <a class="switch-link" data-target="signup">Sign Up</a>
        </div>
      </div>

      <!-- Signup Form -->
      <div class="form-content" id="signup-form">
        <div class="welcome-text">
          <h2>Create Account üç≤</h2>
          <p>Join Ceylon Kitchen today</p>
        </div>

        <form id="signupForm">
          <div class="form-group">
            <label for="signupUsername">Username</label>
            <input type="text" id="signupUsername" placeholder="Choose a username" />
            <div class="error-message" id="signupUsernameError"></div>
          </div>

          <div class="form-group">
            <label for="signupEmail">Email Address</label>
            <input type="email" id="signupEmail" placeholder="your.email@example.com" />
            <div class="error-message" id="signupEmailError"></div>
          </div>

          <div class="form-group">
            <label for="signupPhone">Phone Number</label>
            <input type="tel" id="signupPhone" placeholder="+94 77 123 4567" />
            <div class="error-message" id="signupPhoneError"></div>
          </div>

          <div class="form-group">
            <label for="signupPassword">Password</label>
            <input type="password" id="signupPassword" placeholder="Create a strong password" />
            <div class="error-message" id="signupPasswordError"></div>
          </div>

          <div class="checkbox-group">
            <div class="checkbox-wrapper">
              <input type="checkbox" id="rememberSignup" />
              <label for="rememberSignup">Remember me</label>
            </div>
          </div>

          <button type="submit" class="submit-btn">Sign Up</button>
        </form>

        <div class="switch-text">
          Already have an account? <a class="switch-link" data-target="login">Login</a>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    // User storage
    const users = {};

    // Load users from memory on page load
    function loadUsers() {
      const savedUsers = sessionStorage.getItem('ceylon_users');
      if (savedUsers) {
        Object.assign(users, JSON.parse(savedUsers));
      }
    }

    // Save users to session
    function saveUsers() {
      sessionStorage.setItem('ceylon_users', JSON.stringify(users));
    }

    // Check for remembered login
    function checkRememberedLogin() {
      const remembered = sessionStorage.getItem('ceylon_remembered');
      if (remembered) {
        const userData = JSON.parse(remembered);
        document.getElementById('loginEmail').value = userData.email;
        document.getElementById('rememberMe').checked = true;
      }
    }

    // Toast notification
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = `toast show ${type}`;
      setTimeout(() => {
        toast.className = 'toast';
      }, 3000);
    }

    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        const target = tab.dataset.tab;
        switchTab(target);
      });
    });

    document.querySelectorAll('.switch-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const target = link.dataset.target;
        switchTab(target);
      });
    });

    function switchTab(target) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.form-content').forEach(f => f.classList.remove('active'));
      
      document.querySelector(`.tab[data-tab="${target}"]`).classList.add('active');
      document.getElementById(`${target}-form`).classList.add('active');
    }

    // Validation helper
    function showError(fieldId, message) {
      const errorEl = document.getElementById(fieldId + 'Error');
      const inputEl = document.getElementById(fieldId);
      errorEl.textContent = message;
      errorEl.classList.add('show');
      inputEl.classList.add('error');
    }

    function clearError(fieldId) {
      const errorEl = document.getElementById(fieldId + 'Error');
      const inputEl = document.getElementById(fieldId);
      errorEl.textContent = '';
      errorEl.classList.remove('show');
      inputEl.classList.remove('error');
    }

    function clearAllErrors(formType) {
      if (formType === 'login') {
        clearError('loginEmail');
        clearError('loginPassword');
      } else {
        clearError('signupUsername');
        clearError('signupEmail');
        clearError('signupPhone');
        clearError('signupPassword');
      }
    }

    // Email validation
    function isValidEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    // Phone validation
    function isValidPhone(phone) {
      const re = /^[+]?[\d\s-]{10,}$/;
      return re.test(phone);
    }

    // Login Form
    document.getElementById('loginForm').addEventListener('submit', (e) => {
      e.preventDefault();
      clearAllErrors('login');

      const email = document.getElementById('loginEmail').value.trim();
      const password = document.getElementById('loginPassword').value;
      const remember = document.getElementById('rememberMe').checked;
      
      let isValid = true;

      if (!email) {
        showError('loginEmail', 'Email is required');
        isValid = false;
      } else if (!isValidEmail(email)) {
        showError('loginEmail', 'Please enter a valid email');
        isValid = false;
      }

      if (!password) {
        showError('loginPassword', 'Password is required');
        isValid = false;
      } else if (password.length < 6) {
        showError('loginPassword', 'Password must be at least 6 characters');
        isValid = false;
      }

      if (isValid) {
        // Check if user exists
        if (users[email] && users[email].password === password) {
          showToast('Login successful! Welcome back üéâ', 'success');
          
          // Save remember me
          if (remember) {
            sessionStorage.setItem('ceylon_remembered', JSON.stringify({ email }));
          } else {
            sessionStorage.removeItem('ceylon_remembered');
          }

          // Save current session
          sessionStorage.setItem('ceylon_current_user', JSON.stringify(users[email]));
          
          // Reset form
          setTimeout(() => {
            document.getElementById('loginForm').reset();
          }, 1500);
        } else {
          showToast('Invalid email or password', 'error');
        }
      }
    });

    // Signup Form
    document.getElementById('signupForm').addEventListener('submit', (e) => {
      e.preventDefault();
      clearAllErrors('signup');

      const username = document.getElementById('signupUsername').value.trim();
      const email = document.getElementById('signupEmail').value.trim();
      const phone = document.getElementById('signupPhone').value.trim();
      const password = document.getElementById('signupPassword').value;
      const remember = document.getElementById('rememberSignup').checked;
      
      let isValid = true;

      if (!username) {
        showError('signupUsername', 'Username is required');
        isValid = false;
      } else if (username.length < 3) {
        showError('signupUsername', 'Username must be at least 3 characters');
        isValid = false;
      }

      if (!email) {
        showError('signupEmail', 'Email is required');
        isValid = false;
      } else if (!isValidEmail(email)) {
        showError('signupEmail', 'Please enter a valid email');
        isValid = false;
      } else if (users[email]) {
        showError('signupEmail', 'Email already registered');
        isValid = false;
      }

      if (!phone) {
        showError('signupPhone', 'Phone number is required');
        isValid = false;
      } else if (!isValidPhone(phone)) {
        showError('signupPhone', 'Please enter a valid phone number');
        isValid = false;
      }

      if (!password) {
        showError('signupPassword', 'Password is required');
        isValid = false;
      } else if (password.length < 6) {
        showError('signupPassword', 'Password must be at least 6 characters');
        isValid = false;
      }

      if (isValid) {
        // Create new user
        users[email] = {
          username,
          email,
          phone,
          password
        };
        
        saveUsers();
        showToast('Account created successfully! üéâ', 'success');
        
        // Save remember me
        if (remember) {
          sessionStorage.setItem('ceylon_remembered', JSON.stringify({ email }));
        }

        // Save current session
        sessionStorage.setItem('ceylon_current_user', JSON.stringify(users[email]));
        
        // Reset form and switch to login
        setTimeout(() => {
          document.getElementById('signupForm').reset();
          switchTab('login');
        }, 1500);
      }
    });

    // Clear errors on input
    document.querySelectorAll('input').forEach(input => {
      input.addEventListener('input', () => {
        if (input.classList.contains('error')) {
          clearError(input.id);
        }
      });
    });

    // Initialize
    loadUsers();
    checkRememberedLogin();
  </script>
</body>
</html>